import{_ as h}from"./index.482c706a.js";import{o as d,c,a as n,j as g,l as v}from"./vendor.166a2bad.js";const l={data(){return{videoWidth:3e3,videoHeight:300,imgSrc:"",thisCancas:null,thisContext:null,thisVideo:null}},methods:{getCompetence(){var e=this;this.thisCancas=document.getElementById("canvasCamera"),this.thisContext=this.thisCancas.getContext("2d"),this.thisVideo=document.getElementById("videoCamera"),navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(s){var o=navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.getUserMedia;return o?new Promise(function(i,a){o.call(navigator,s,i,a)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))});var t={audio:!1,video:{width:this.videoWidth,height:this.videoHeight,transform:"scaleX(-1)"}};navigator.mediaDevices.getUserMedia(t).then(function(s){"srcObject"in e.thisVideo?e.thisVideo.srcObject=s:e.thisVideo.src=window.URL.createObjectURL(s),e.thisVideo.onloadedmetadata=function(o){e.thisVideo.play()}}).catch(s=>{console.log(s)})},setImage(){var e=this;e.thisContext.drawImage(e.thisVideo,0,0,e.videoWidth,e.videoHeight);var t=this.thisCancas.toDataURL("image/png");console.log(t),e.imgSrc=t,this.$emit("refreshDataList",this.imgSrc)},dataURLtoFile(e,t){var s=e.split(","),o=s[0].match(/:(.*?);/)[1],i=atob(s[1]),a=i.length,r=new Uint8Array(a);for(console.log(r);a--;)r[a]=i.charCodeAt(a);return new File([r],t,{type:o})},stopNavigator(){this.thisVideo.srcObject.getTracks()[0].stop()}}},m={class:"camera_outer"},u=["width","height"],_=["width","height"],p={key:0,class:"img_bg_camera"},f=["src"],C=v(" \u3000\u3000\u3000\u3000\u3000");function b(e,t,s,o,i,a){return d(),c("div",m,[n("video",{id:"videoCamera",width:i.videoWidth,height:i.videoHeight,autoplay:""},null,8,u),n("canvas",{style:{display:"none"},id:"canvasCamera",width:i.videoWidth,height:i.videoHeight},null,8,_),i.imgSrc?(d(),c("div",p,[n("img",{src:i.imgSrc,alt:"",class:"tx_img"},null,8,f)])):g("",!0),n("button",{onClick:t[0]||(t[0]=r=>a.getCompetence())},"\u6253\u5F00\u6444\u50CF\u5934"),n("button",{onClick:t[1]||(t[1]=r=>a.stopNavigator())},"\u5173\u95ED\u6444\u50CF\u5934"),C,n("button",{onClick:t[2]||(t[2]=r=>a.setImage())},"\u62CD\u7167")])}var x=h(l,[["render",b],["__scopeId","data-v-bb50b380"]]);export{x as default};
