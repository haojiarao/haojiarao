/**
 * tracking - A modern approach for Computer Vision on the web.
 * @author Eduardo Lundgren <edu@rdo.io>
 * @version v1.1.2
 * @link http://trackingjs.com
 * @license BSD
 */(function(r,e){r.tracking=r.tracking||{},tracking.inherits=function(t,n){function a(){}a.prototype=n.prototype,t.superClass_=n.prototype,t.prototype=new a,t.prototype.constructor=t,t.base=function(i,o){var c=Array.prototype.slice.call(arguments,2);return n.prototype[o].apply(i,c)}},tracking.initUserMedia_=function(t,n){r.navigator.getUserMedia({video:!0,audio:!(!n||!n.audio)},function(a){try{t.src=r.URL.createObjectURL(a)}catch{t.src=a}},function(){throw Error("Cannot capture user camera.")})},tracking.isNode=function(t){return t.nodeType||this.isWindow(t)},tracking.isWindow=function(t){return!!(t&&t.alert&&t.document)},tracking.one=function(t,n){return this.isNode(t)?t:(n||document).querySelector(t)},tracking.track=function(t,n,a){if(t=tracking.one(t),!t)throw new Error("Element not found, try a different element or selector.");if(!n)throw new Error("Tracker not specified, try `tracking.track(element, new tracking.FaceTracker())`.");switch(t.nodeName.toLowerCase()){case"canvas":return this.trackCanvas_(t,n,a);case"img":return this.trackImg_(t,n,a);case"video":return a&&a.camera&&this.initUserMedia_(t,a),this.trackVideo_(t,n,a);default:throw new Error("Element not supported, try in a canvas, img, or video.")}},tracking.trackCanvas_=function(t,n){var a=this,i=new tracking.TrackerTask(n);return i.on("run",function(){a.trackCanvasInternal_(t,n)}),i.run()},tracking.trackCanvasInternal_=function(t,n){var a=t.width,i=t.height,o=t.getContext("2d"),c=o.getImageData(0,0,a,i);n.track(c.data,a,i)},tracking.trackImg_=function(t,n){var a=t.width,i=t.height,o=document.createElement("canvas");o.width=a,o.height=i;var c=new tracking.TrackerTask(n);return c.on("run",function(){tracking.Canvas.loadImage(o,t.src,0,0,a,i,function(){tracking.trackCanvasInternal_(o,n)})}),c.run()},tracking.trackVideo_=function(t,n){var a,i,o=document.createElement("canvas"),c=o.getContext("2d"),s=function(){a=t.offsetWidth,i=t.offsetHeight,o.width=a,o.height=i};s(),t.addEventListener("resize",s);var g,h=function(){g=r.requestAnimationFrame(function(){if(t.readyState===t.HAVE_ENOUGH_DATA){try{c.drawImage(t,0,0,a,i)}catch{}tracking.trackCanvasInternal_(o,n)}h()})},k=new tracking.TrackerTask(n);return k.on("stop",function(){r.cancelAnimationFrame(g)}),k.on("run",function(){h()}),k.run()},r.URL||(r.URL=r.URL||r.webkitURL||r.msURL||r.oURL),navigator.getUserMedia||(navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia)})(window),function(){tracking.EventEmitter=function(){},tracking.EventEmitter.prototype.events_=null,tracking.EventEmitter.prototype.addListener=function(r,e){if(typeof e!="function")throw new TypeError("Listener must be a function");return this.events_||(this.events_={}),this.emit("newListener",r,e),this.events_[r]||(this.events_[r]=[]),this.events_[r].push(e),this},tracking.EventEmitter.prototype.listeners=function(r){return this.events_&&this.events_[r]},tracking.EventEmitter.prototype.emit=function(r){var e=this.listeners(r);if(e){for(var t=Array.prototype.slice.call(arguments,1),n=0;n<e.length;n++)e[n]&&e[n].apply(this,t);return!0}return!1},tracking.EventEmitter.prototype.on=tracking.EventEmitter.prototype.addListener,tracking.EventEmitter.prototype.once=function(r,e){var t=this;t.on(r,function n(){t.removeListener(r,n),e.apply(this,arguments)})},tracking.EventEmitter.prototype.removeAllListeners=function(r){return this.events_?(r?delete this.events_[r]:delete this.events_,this):this},tracking.EventEmitter.prototype.removeListener=function(r,e){if(typeof e!="function")throw new TypeError("Listener must be a function");if(!this.events_)return this;var t=this.listeners(r);if(Array.isArray(t)){var n=t.indexOf(e);if(0>n)return this;t.splice(n,1)}return this},tracking.EventEmitter.prototype.setMaxListeners=function(){throw new Error("Not implemented")}}(),function(){tracking.Canvas={},tracking.Canvas.loadImage=function(r,e,t,n,a,i,o){var c=this,s=new window.Image;s.crossOrigin="*",s.onload=function(){var g=r.getContext("2d");r.width=a,r.height=i,g.drawImage(s,t,n,a,i),o&&o.call(c),s=null},s.src=e}}(),function(){tracking.DisjointSet=function(r){if(r===void 0)throw new Error("DisjointSet length not specified.");this.length=r,this.parent=new Uint32Array(r);for(var e=0;r>e;e++)this.parent[e]=e},tracking.DisjointSet.prototype.length=null,tracking.DisjointSet.prototype.parent=null,tracking.DisjointSet.prototype.find=function(r){return this.parent[r]===r?r:this.parent[r]=this.find(this.parent[r])},tracking.DisjointSet.prototype.union=function(r,e){var t=this.find(r),n=this.find(e);this.parent[t]=n}}(),function(){tracking.Image={},tracking.Image.blur=function(r,e,t,n){if(n=Math.abs(n),1>=n)throw new Error("Diameter should be greater than 1.");for(var a=n/2,i=Math.ceil(n)+(1-Math.ceil(n)%2),o=new Float32Array(i),c=(a+.5)/3,s=c*c,g=1/Math.sqrt(2*Math.PI*s),h=-1/(2*c*c),k=0,p=Math.floor(i/2),u=0;i>u;u++){var v=u-p,m=g*Math.exp(v*v*h);o[u]=m,k+=m}for(var f=0;f<o.length;f++)o[f]/=k;return this.separableConvolve(r,e,t,o,o,!1)},tracking.Image.computeIntegralImage=function(r,e,t,n,a,i,o){if(arguments.length<4)throw new Error("You should specify at least one output array in the order: sum, square, tilted, sobel.");var c;o&&(c=tracking.Image.sobel(r,e,t));for(var s=0;t>s;s++)for(var g=0;e>g;g++){var h=s*e*4+4*g,k=~~(.299*r[h]+.587*r[h+1]+.114*r[h+2]);if(n&&this.computePixelValueSAT_(n,e,s,g,k),a&&this.computePixelValueSAT_(a,e,s,g,k*k),i){var p=h-4*e,u=~~(.299*r[p]+.587*r[p+1]+.114*r[p+2]);this.computePixelValueRSAT_(i,e,s,g,k,u||0)}o&&this.computePixelValueSAT_(o,e,s,g,c[h])}},tracking.Image.computePixelValueRSAT_=function(r,e,t,n,a,i){var o=t*e+n;r[o]=(r[o-e-1]||0)+(r[o-e+1]||0)-(r[o-e-e]||0)+a+i},tracking.Image.computePixelValueSAT_=function(r,e,t,n,a){var i=t*e+n;r[i]=(r[i-e]||0)+(r[i-1]||0)+a-(r[i-e-1]||0)},tracking.Image.grayscale=function(r,e,t,n){for(var a=new Uint8ClampedArray(n?r.length:r.length>>2),i=0,o=0,c=0;t>c;c++)for(var s=0;e>s;s++){var g=.299*r[o]+.587*r[o+1]+.114*r[o+2];a[i++]=g,n&&(a[i++]=g,a[i++]=g,a[i++]=r[o+3]),o+=4}return a},tracking.Image.horizontalConvolve=function(r,e,t,n,a){for(var i=n.length,o=Math.floor(i/2),c=new Float32Array(e*t*4),s=a?1:0,g=0;t>g;g++)for(var h=0;e>h;h++){for(var k=g,p=h,u=4*(g*e+h),v=0,m=0,f=0,d=0,l=0;i>l;l++){var y=k,T=Math.min(e-1,Math.max(0,p+l-o)),w=4*(y*e+T),_=n[l];v+=r[w]*_,m+=r[w+1]*_,f+=r[w+2]*_,d+=r[w+3]*_}c[u]=v,c[u+1]=m,c[u+2]=f,c[u+3]=d+s*(255-d)}return c},tracking.Image.verticalConvolve=function(r,e,t,n,a){for(var i=n.length,o=Math.floor(i/2),c=new Float32Array(e*t*4),s=a?1:0,g=0;t>g;g++)for(var h=0;e>h;h++){for(var k=g,p=h,u=4*(g*e+h),v=0,m=0,f=0,d=0,l=0;i>l;l++){var y=Math.min(t-1,Math.max(0,k+l-o)),T=p,w=4*(y*e+T),_=n[l];v+=r[w]*_,m+=r[w+1]*_,f+=r[w+2]*_,d+=r[w+3]*_}c[u]=v,c[u+1]=m,c[u+2]=f,c[u+3]=d+s*(255-d)}return c},tracking.Image.separableConvolve=function(r,e,t,n,a,i){var o=this.verticalConvolve(r,e,t,a,i);return this.horizontalConvolve(o,e,t,n,i)},tracking.Image.sobel=function(r,e,t){r=this.grayscale(r,e,t,!0);for(var n=new Float32Array(e*t*4),a=new Float32Array([-1,0,1]),i=new Float32Array([1,2,1]),o=this.separableConvolve(r,e,t,a,i),c=this.separableConvolve(r,e,t,i,a),s=0;s<n.length;s+=4){var g=o[s],h=c[s],k=Math.sqrt(h*h+g*g);n[s]=k,n[s+1]=k,n[s+2]=k,n[s+3]=255}return n}}(),function(){tracking.ViolaJones={},tracking.ViolaJones.REGIONS_OVERLAP=.5,tracking.ViolaJones.classifiers={},tracking.ViolaJones.detect=function(r,e,t,n,a,i,o,c){var s,g=0,h=[],k=new Int32Array(e*t),p=new Int32Array(e*t),u=new Int32Array(e*t);o>0&&(s=new Int32Array(e*t)),tracking.Image.computeIntegralImage(r,e,t,k,p,u,s);for(var v=c[0],m=c[1],f=n*a,d=f*v|0,l=f*m|0;e>d&&t>l;){for(var y=f*i+.5|0,T=0;t-l>T;T+=y)for(var w=0;e-d>w;w+=y)o>0&&this.isTriviallyExcluded(o,s,T,w,e,d,l)||this.evalStages_(c,k,p,u,T,w,e,d,l,f)&&(h[g++]={width:d,height:l,x:w,y:T});f*=a,d=f*v|0,l=f*m|0}return this.mergeRectangles_(h)},tracking.ViolaJones.isTriviallyExcluded=function(r,e,t,n,a,i,o){var c=t*a+n,s=c+i,g=c+o*a,h=g+i,k=(e[c]-e[s]-e[g]+e[h])/(i*o*255);return r>k},tracking.ViolaJones.evalStages_=function(r,e,t,n,a,i,o,c,s,g){var h=1/(c*s),k=a*o+i,p=k+c,u=k+s*o,v=u+c,m=(e[k]-e[p]-e[u]+e[v])*h,f=(t[k]-t[p]-t[u]+t[v])*h-m*m,d=1;f>0&&(d=Math.sqrt(f));for(var l=r.length,y=2;l>y;){for(var T=0,w=r[y++],_=r[y++];_--;){for(var C=0,x=r[y++],b=r[y++],j=0;b>j;j++){var E,D,I,R,O=i+r[y++]*g+.5|0,A=a+r[y++]*g+.5|0,M=r[y++]*g+.5|0,S=r[y++]*g+.5|0,F=r[y++];x?(E=O-S+M+(A+M+S-1)*o,D=O+(A-1)*o,I=O-S+(A+S-1)*o,R=O+M+(A+M-1)*o,C+=(n[E]+n[D]-n[I]-n[R])*F):(E=A*o+O,D=E+M,I=E+S*o,R=I+M,C+=(e[E]-e[D]-e[I]+e[R])*F)}var L=r[y++],V=r[y++],U=r[y++];T+=L*d>C*h?V:U}if(w>T)return!1}return!0},tracking.ViolaJones.mergeRectangles_=function(r){for(var e=new tracking.DisjointSet(r.length),t=0;t<r.length;t++)for(var n=r[t],a=0;a<r.length;a++){var i=r[a];if(tracking.Math.intersectRect(n.x,n.y,n.x+n.width,n.y+n.height,i.x,i.y,i.x+i.width,i.y+i.height)){var o=Math.max(n.x,i.x),c=Math.max(n.y,i.y),s=Math.min(n.x+n.width,i.x+i.width),g=Math.min(n.y+n.height,i.y+i.height),h=(o-s)*(c-g),k=n.width*n.height,p=i.width*i.height;h/(k*(k/p))>=this.REGIONS_OVERLAP&&h/(p*(k/p))>=this.REGIONS_OVERLAP&&e.union(t,a)}}for(var u={},v=0;v<e.length;v++){var m=e.find(v);u[m]?(u[m].total++,u[m].width+=r[v].width,u[m].height+=r[v].height,u[m].x+=r[v].x,u[m].y+=r[v].y):u[m]={total:1,width:r[v].width,height:r[v].height,x:r[v].x,y:r[v].y}}var f=[];return Object.keys(u).forEach(function(d){var l=u[d];f.push({total:l.total,width:l.width/l.total+.5|0,height:l.height/l.total+.5|0,x:l.x/l.total+.5|0,y:l.y/l.total+.5|0})}),f}}(),function(){tracking.Brief={},tracking.Brief.N=512,tracking.Brief.randomImageOffsets_={},tracking.Brief.randomWindowOffsets_=null,tracking.Brief.getDescriptors=function(r,e,t){for(var n=new Int32Array((t.length>>1)*(this.N>>5)),a=0,i=this.getRandomOffsets_(e),o=0,c=0;c<t.length;c+=2)for(var s=e*t[c+1]+t[c],g=0,h=0,k=this.N;k>h;h++)r[i[g++]+s]<r[i[g++]+s]&&(a|=1<<(31&h)),h+1&31||(n[o++]=a,a=0);return n},tracking.Brief.match=function(r,e,t,n){for(var a=r.length>>1,i=t.length>>1,o=new Array(a),c=0;a>c;c++){for(var s=1/0,g=0,h=0;i>h;h++){for(var k=0,p=0,u=this.N>>5;u>p;p++)k+=tracking.Math.hammingWeight(e[c*u+p]^n[h*u+p]);s>k&&(s=k,g=h)}o[c]={index1:c,index2:g,keypoint1:[r[2*c],r[2*c+1]],keypoint2:[t[2*g],t[2*g+1]],confidence:1-s/this.N}}return o},tracking.Brief.reciprocalMatch=function(r,e,t,n){var a=[];if(r.length===0||t.length===0)return a;for(var i=tracking.Brief.match(r,e,t,n),o=tracking.Brief.match(t,n,r,e),c=0;c<i.length;c++)o[i[c].index2].index2===c&&a.push(i[c]);return a},tracking.Brief.getRandomOffsets_=function(r){if(!this.randomWindowOffsets_){for(var e=0,t=new Int32Array(4*this.N),n=0;n<this.N;n++)t[e++]=Math.round(tracking.Math.uniformRandom(-15,16)),t[e++]=Math.round(tracking.Math.uniformRandom(-15,16)),t[e++]=Math.round(tracking.Math.uniformRandom(-15,16)),t[e++]=Math.round(tracking.Math.uniformRandom(-15,16));this.randomWindowOffsets_=t}if(!this.randomImageOffsets_[r]){for(var a=0,i=new Int32Array(2*this.N),o=0;o<this.N;o++)i[a++]=this.randomWindowOffsets_[4*o]*r+this.randomWindowOffsets_[4*o+1],i[a++]=this.randomWindowOffsets_[4*o+2]*r+this.randomWindowOffsets_[4*o+3];this.randomImageOffsets_[r]=i}return this.randomImageOffsets_[r]}}(),function(){tracking.Fast={},tracking.Fast.THRESHOLD=40,tracking.Fast.circles_={},tracking.Fast.findCorners=function(r,e,t,n){var a=this.getCircleOffsets_(e),i=new Int32Array(16),o=[];n===void 0&&(n=this.THRESHOLD);for(var c=3;t-3>c;c++)for(var s=3;e-3>s;s++){for(var g=c*e+s,h=r[g],k=0;16>k;k++)i[k]=r[g+a[k]];this.isCorner(h,i,n)&&(o.push(s,c),s+=3)}return o},tracking.Fast.isBrighter=function(r,e,t){return r-e>t},tracking.Fast.isCorner=function(r,e,t){if(this.isTriviallyExcluded(e,r,t))return!1;for(var n=0;16>n;n++){for(var a=!0,i=!0,o=0;9>o;o++){var c=e[n+o&15];if(!this.isBrighter(r,c,t)&&(i=!1,a===!1)||!this.isDarker(r,c,t)&&(a=!1,i===!1))break}if(i||a)return!0}return!1},tracking.Fast.isDarker=function(r,e,t){return e-r>t},tracking.Fast.isTriviallyExcluded=function(r,e,t){var n=0,a=r[8],i=r[12],o=r[4],c=r[0];return this.isBrighter(c,e,t)&&n++,this.isBrighter(o,e,t)&&n++,this.isBrighter(a,e,t)&&n++,this.isBrighter(i,e,t)&&n++,3>n&&(n=0,this.isDarker(c,e,t)&&n++,this.isDarker(o,e,t)&&n++,this.isDarker(a,e,t)&&n++,this.isDarker(i,e,t)&&n++,3>n)},tracking.Fast.getCircleOffsets_=function(r){if(this.circles_[r])return this.circles_[r];var e=new Int32Array(16);return e[0]=-r-r-r,e[1]=e[0]+1,e[2]=e[1]+r+1,e[3]=e[2]+r+1,e[4]=e[3]+r,e[5]=e[4]+r,e[6]=e[5]+r-1,e[7]=e[6]+r-1,e[8]=e[7]-1,e[9]=e[8]-1,e[10]=e[9]-r-1,e[11]=e[10]-r-1,e[12]=e[11]-r,e[13]=e[12]-r,e[14]=e[13]-r+1,e[15]=e[14]-r+1,this.circles_[r]=e,e}}(),function(){tracking.Math={},tracking.Math.distance=function(r,e,t,n){var a=t-r,i=n-e;return Math.sqrt(a*a+i*i)},tracking.Math.hammingWeight=function(r){return r-=r>>1&1431655765,r=(858993459&r)+(r>>2&858993459),16843009*(r+(r>>4)&252645135)>>24},tracking.Math.uniformRandom=function(r,e){return r+Math.random()*(e-r)},tracking.Math.intersectRect=function(r,e,t,n,a,i,o,c){return!(a>t||r>o||i>n||e>c)}}(),function(){tracking.Matrix={},tracking.Matrix.forEach=function(r,e,t,n,a){a=a||1;for(var i=0;t>i;i+=a)for(var o=0;e>o;o+=a){var c=i*e*4+4*o;n.call(this,r[c],r[c+1],r[c+2],r[c+3],c,i,o)}}}(),function(){tracking.EPnP={},tracking.EPnP.solve=function(r,e,t){}}(),function(){tracking.Tracker=function(){tracking.Tracker.base(this,"constructor")},tracking.inherits(tracking.Tracker,tracking.EventEmitter),tracking.Tracker.prototype.track=function(){}}(),function(){tracking.TrackerTask=function(r){if(tracking.TrackerTask.base(this,"constructor"),!r)throw new Error("Tracker instance not specified.");this.setTracker(r)},tracking.inherits(tracking.TrackerTask,tracking.EventEmitter),tracking.TrackerTask.prototype.tracker_=null,tracking.TrackerTask.prototype.running_=!1,tracking.TrackerTask.prototype.getTracker=function(){return this.tracker_},tracking.TrackerTask.prototype.inRunning=function(){return this.running_},tracking.TrackerTask.prototype.setRunning=function(r){this.running_=r},tracking.TrackerTask.prototype.setTracker=function(r){this.tracker_=r},tracking.TrackerTask.prototype.run=function(){var r=this;if(!this.inRunning())return this.setRunning(!0),this.reemitTrackEvent_=function(e){r.emit("track",e)},this.tracker_.on("track",this.reemitTrackEvent_),this.emit("run"),this},tracking.TrackerTask.prototype.stop=function(){return this.inRunning()?(this.setRunning(!1),this.emit("stop"),this.tracker_.removeListener("track",this.reemitTrackEvent_),this):void 0}}(),function(){tracking.ColorTracker=function(t){tracking.ColorTracker.base(this,"constructor"),typeof t=="string"&&(t=[t]),t&&(t.forEach(function(n){if(!tracking.ColorTracker.getColor(n))throw new Error('Color not valid, try `new tracking.ColorTracker("magenta")`.')}),this.setColors(t))},tracking.inherits(tracking.ColorTracker,tracking.Tracker),tracking.ColorTracker.knownColors_={},tracking.ColorTracker.neighbours_={},tracking.ColorTracker.registerColor=function(t,n){tracking.ColorTracker.knownColors_[t]=n},tracking.ColorTracker.getColor=function(t){return tracking.ColorTracker.knownColors_[t]},tracking.ColorTracker.prototype.colors=["magenta"],tracking.ColorTracker.prototype.minDimension=20,tracking.ColorTracker.prototype.maxDimension=1/0,tracking.ColorTracker.prototype.minGroupSize=30,tracking.ColorTracker.prototype.calculateDimensions_=function(t,n){for(var a=-1,i=-1,o=1/0,c=1/0,s=0;n>s;s+=2){var g=t[s],h=t[s+1];o>g&&(o=g),g>a&&(a=g),c>h&&(c=h),h>i&&(i=h)}return{width:a-o,height:i-c,x:o,y:c}},tracking.ColorTracker.prototype.getColors=function(){return this.colors},tracking.ColorTracker.prototype.getMinDimension=function(){return this.minDimension},tracking.ColorTracker.prototype.getMaxDimension=function(){return this.maxDimension},tracking.ColorTracker.prototype.getMinGroupSize=function(){return this.minGroupSize},tracking.ColorTracker.prototype.getNeighboursForWidth_=function(t){if(tracking.ColorTracker.neighbours_[t])return tracking.ColorTracker.neighbours_[t];var n=new Int32Array(8);return n[0]=4*-t,n[1]=4*-t+4,n[2]=4,n[3]=4*t+4,n[4]=4*t,n[5]=4*t-4,n[6]=-4,n[7]=4*-t-4,tracking.ColorTracker.neighbours_[t]=n,n},tracking.ColorTracker.prototype.mergeRectangles_=function(t){for(var n,a=[],i=this.getMinDimension(),o=this.getMaxDimension(),c=0;c<t.length;c++){var s=t[c];n=!0;for(var g=c+1;g<t.length;g++){var h=t[g];if(tracking.Math.intersectRect(s.x,s.y,s.x+s.width,s.y+s.height,h.x,h.y,h.x+h.width,h.y+h.height)){n=!1;var k=Math.min(s.x,h.x),p=Math.min(s.y,h.y),u=Math.max(s.x+s.width,h.x+h.width),v=Math.max(s.y+s.height,h.y+h.height);h.height=v-p,h.width=u-k,h.x=k,h.y=p;break}}n&&s.width>=i&&s.height>=i&&s.width<=o&&s.height<=o&&a.push(s)}return a},tracking.ColorTracker.prototype.setColors=function(t){this.colors=t},tracking.ColorTracker.prototype.setMinDimension=function(t){this.minDimension=t},tracking.ColorTracker.prototype.setMaxDimension=function(t){this.maxDimension=t},tracking.ColorTracker.prototype.setMinGroupSize=function(t){this.minGroupSize=t},tracking.ColorTracker.prototype.track=function(t,n,a){var i=this,o=this.getColors();if(!o)throw new Error('Colors not specified, try `new tracking.ColorTracker("magenta")`.');var c=[];o.forEach(function(s){c=c.concat(i.trackColor_(t,n,a,s))}),this.emit("track",{data:c})},tracking.ColorTracker.prototype.trackColor_=function(t,n,a,i){var o,c,s,g,h,k=tracking.ColorTracker.knownColors_[i],p=new Int32Array(t.length>>2),u=new Int8Array(t.length),v=this.getMinGroupSize(),m=this.getNeighboursForWidth_(n),f=new Int32Array(t.length),d=[],l=-4;if(!k)return d;for(var y=0;a>y;y++)for(var T=0;n>T;T++)if(l+=4,!u[l]){for(o=0,h=-1,f[++h]=l,f[++h]=y,f[++h]=T,u[l]=1;h>=0;)if(s=f[h--],c=f[h--],g=f[h--],k(t[g],t[g+1],t[g+2],t[g+3],g,c,s)){p[o++]=s,p[o++]=c;for(var w=0;w<m.length;w++){var _=g+m[w],C=c+r[w],x=s+e[w];!u[_]&&C>=0&&a>C&&x>=0&&n>x&&(f[++h]=_,f[++h]=C,f[++h]=x,u[_]=1)}}if(o>=v){var b=this.calculateDimensions_(p,o);b&&(b.color=i,d.push(b))}}return this.mergeRectangles_(d)},tracking.ColorTracker.registerColor("cyan",function(t,n,a){var i=50,o=70,c=t-0,s=n-255,g=a-255;return n-t>=i&&a-t>=o?!0:6400>c*c+s*s+g*g}),tracking.ColorTracker.registerColor("magenta",function(t,n,a){var i=50,o=t-255,c=n-0,s=a-255;return t-n>=i&&a-n>=i?!0:19600>o*o+c*c+s*s}),tracking.ColorTracker.registerColor("yellow",function(t,n,a){var i=50,o=t-255,c=n-255,s=a-0;return t-a>=i&&n-a>=i?!0:1e4>o*o+c*c+s*s});var r=new Int32Array([-1,-1,0,1,1,1,0,-1]),e=new Int32Array([0,1,1,1,0,-1,-1,-1])}(),function(){tracking.ObjectTracker=function(r){tracking.ObjectTracker.base(this,"constructor"),r&&(Array.isArray(r)||(r=[r]),Array.isArray(r)&&r.forEach(function(e,t){if(typeof e=="string"&&(r[t]=tracking.ViolaJones.classifiers[e]),!r[t])throw new Error('Object classifier not valid, try `new tracking.ObjectTracker("face")`.')})),this.setClassifiers(r)},tracking.inherits(tracking.ObjectTracker,tracking.Tracker),tracking.ObjectTracker.prototype.edgesDensity=.2,tracking.ObjectTracker.prototype.initialScale=1,tracking.ObjectTracker.prototype.scaleFactor=1.25,tracking.ObjectTracker.prototype.stepSize=1.5,tracking.ObjectTracker.prototype.getClassifiers=function(){return this.classifiers},tracking.ObjectTracker.prototype.getEdgesDensity=function(){return this.edgesDensity},tracking.ObjectTracker.prototype.getInitialScale=function(){return this.initialScale},tracking.ObjectTracker.prototype.getScaleFactor=function(){return this.scaleFactor},tracking.ObjectTracker.prototype.getStepSize=function(){return this.stepSize},tracking.ObjectTracker.prototype.track=function(r,e,t){var n=this,a=this.getClassifiers();if(!a)throw new Error('Object classifier not specified, try `new tracking.ObjectTracker("face")`.');var i=[];a.forEach(function(o){i=i.concat(tracking.ViolaJones.detect(r,e,t,n.getInitialScale(),n.getScaleFactor(),n.getStepSize(),n.getEdgesDensity(),o))}),this.emit("track",{data:i})},tracking.ObjectTracker.prototype.setClassifiers=function(r){this.classifiers=r},tracking.ObjectTracker.prototype.setEdgesDensity=function(r){this.edgesDensity=r},tracking.ObjectTracker.prototype.setInitialScale=function(r){this.initialScale=r},tracking.ObjectTracker.prototype.setScaleFactor=function(r){this.scaleFactor=r},tracking.ObjectTracker.prototype.setStepSize=function(r){this.stepSize=r}}();
